<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content='The aim of this function is to simplify country data merging for quick analyses. Compared to a normal merge function auto_merge():
Is able to perform the merging of multiple data tables at once.
Supports automatic detection of columns to merge.
It is able to handle different country naming conventions and date formats. For example, it will be able to recognise that "Italy" and "ITA" refer to the same country and will merge the two entries across tables.
It detects if data is in a wide format with country names or years in the column names and will automatically pivot the data.

'><title>Simplified merging supporting different country nomenclatures and date formats — auto_merge • countries</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Simplified merging supporting different country nomenclatures and date formats — auto_merge"><meta property="og:description" content='The aim of this function is to simplify country data merging for quick analyses. Compared to a normal merge function auto_merge():
Is able to perform the merging of multiple data tables at once.
Supports automatic detection of columns to merge.
It is able to handle different country naming conventions and date formats. For example, it will be able to recognise that "Italy" and "ITA" refer to the same country and will merge the two entries across tables.
It detects if data is in a wide format with country names or years in the column names and will automatically pivot the data.

'><meta property="og:image" content="https://fbellelli.github.io/countries/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">countries</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/auto_merge.html">Easy joining with auto_merge()</a>
    <a class="dropdown-item" href="../articles/data_structure.html">Detecting the structure of data tables</a>
    <a class="dropdown-item" href="../articles/dealing_with_names.html">Dealing with country names</a>
    <a class="dropdown-item" href="../articles/quick_map.html">Easy country chloropleth maps</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/fbellelli/countries/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Simplified merging supporting different country nomenclatures and date formats</h1>
      <small class="dont-index">Source: <a href="https://github.com/fbellelli/countries/blob/HEAD/R/auto_merge.R" class="external-link"><code>R/auto_merge.R</code></a></small>
      <div class="d-none name"><code>auto_merge.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The aim of this function is to simplify country data merging for quick analyses. Compared to a normal merge function <code>auto_merge()</code>:</p><ul><li><p>Is able to perform the merging of multiple data tables at once.</p></li>
<li><p>Supports automatic detection of columns to merge.</p></li>
<li><p>It is able to handle different country naming conventions and date formats. For example, it will be able to recognise that "Italy" and "ITA" refer to the same country and will merge the two entries across tables.</p></li>
<li><p>It detects if data is in a wide format with country names or years in the column names and will automatically pivot the data.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">auto_merge</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  country_to <span class="op">=</span> <span class="st">"ISO3"</span>,</span>
<span>  inner_join <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  merging_info <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  auto_melt <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>...</dt>
<dd><p>Data to be merged. Inputs need to be data frames or coercible to data frame. Tables can also be provided into a single list e.g. <code>tab1, tab2, tab3</code> or <code>list(tab1, tab2, tab3)</code>.</p></dd>


<dt>by</dt>
<dd><p>A list or a vector indicating the columns to be used for merging the data. <em>If not provided, the function will try to automatically detect columns to be merged</em>. For more information, refer to the details sections.</p></dd>


<dt>country_to</dt>
<dd><p>Nomenclature to which country names should be converted to in the output. Default is <code>ISO3</code>. For a description of possible options, refer to the table in the vignette <a href="https://fbellelli.github.io/countries/articles/dealing_with_names.html">Dealing with country names</a>.</p></dd>


<dt>inner_join</dt>
<dd><p>Logical value indicating whether to perform an inner join. The default is <code>FALSE</code>, which results in a full join of the provided tables.</p></dd>


<dt>merging_info</dt>
<dd><p>Logical value. If <code>TRUE</code>, the function will output a list containing the merged data and information generated during the merging process, such as information on columns that have been merged or the conversion table used for country names. The default is <code>FALSE</code>, which results into a single merged table being returned.</p></dd>


<dt>verbose</dt>
<dd><p>Logical value indicating whether to print status messages on the console. Default is <code>TRUE</code>.</p></dd>


<dt>auto_melt</dt>
<dd><p>Logical value indicating whether to automatically pivot country names or years present in the column names. Default is <code>TRUE</code>. When at least 3 country names or years are found in the column names, the function will automatically transform the table from a wide to a long format by pivoting the country/year columns.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>If <code>merging_info = FALSE</code> a single merged table is returned. If <code>merging_info = TRUE</code>, a list object is returned, containing the merged table (<code>merged_table</code>), a table summarising which columns have been merged (<code>info_merged_columns</code>), a table summarising the conversion of country names (<code>info_country_names</code>), a table summarising the conversion of time columns to a common format (<code>info_time_formats</code>), a list of all the columns that have been pivoted when wide tables with country or years in column names were detected (<code>pivoted_columns</code>), a list recapitulating the inputs passed to the function (<code>call</code>).</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><strong>Automatic detection of columns to merge</strong>.
 The automatic detection process starts by first identifying the key of each table, i.e. a set of variables identifying the entries in the table. This process is optimised for common formats of country data.
 The function will then try to match key columns across tables based on their values.
 Columns containing country names and time information are identified and are processed to take into account different nomenclatures and time formats.
 This automatic process works for the most common dataset structures, but it is not foolproof. Therefore, we always advise to check the columns that are being merged by setting <code>verbose = TRUE</code> and reading the printout.
 Moreover, users should be aware that this automatic detection process can increase the overall merging time considerably. This can be especially long for tables containing many columns or when a large number of tables is being merged.</p>
<p><strong>Formatting of <code>by</code> argument</strong>
If an argument is provided to <code>by</code>, it needs to be either 1) a list of column names, or 2) a vector of regular expressions. The format requirements are the following:</p><ol><li><p>In case a <strong>list</strong> is passed, each element of the list must be a vector of length equal to the number of tables being merged (i.e., if 3 tables are being merged, the list needs to contain all vectors of length 3). The vectors should contain the names of columns to be merged in each table, <code>NA</code> can be inserted for tables that do not contain the variable, and names should be ordered in the same order of the tables that are being merged (i.e. the first column name should be present in the first table being merged). The name of the merged columns can be modified by assigning a name to the elements of the list. For example, <code>list("countries"=c("Nation",NA,"COUNTRY"), "sector"=c("Industry","industry",NA))</code> is requesting to merge the columns <code>tab1$Nation</code> and <code>tab3$COUNTRY</code>, and the columns <code>tab1$Industry</code> and <code>tab2$industry</code>. These two merged columns will be named <code>"countries"</code> and <code>"sector"</code> in the output, as requested by the user.</p></li>
<li><p>In case a <strong>vector</strong> is passed, each element is interpreted as a regular expression to be used for matching the columns to be merged. For example, the same order provided in the list example could be written as <code>c("countries"="Nation|COUNTRY", "sector"="[Ii]ndustry")</code>. This will merge the first column in each table whose name matches the pattern described by the regular expression and will name the two resulting columns as <code>"countries"</code> and <code>"sector"</code> respectively.</p></li>
</ol></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="country_name.html">country_name</a>, <a href="find_keycol.html">find_keycol</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># sample data</span></span></span>
<span class="r-in"><span><span class="va">tab1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Industry <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span>, <span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, Nation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ITA"</span>, <span class="st">"FRA"</span>, <span class="st">"ITA"</span>, <span class="st">"FRA"</span><span class="op">)</span>, tot <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tab2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>industry <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>, rate <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">tab3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>COUNTRY <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"United States"</span>, <span class="st">"France"</span>, <span class="st">"India"</span><span class="op">)</span>, national_avg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># examples of merging orders</span></span></span>
<span class="r-in"><span><span class="fu">auto_merge</span><span class="op">(</span><span class="va">tab1</span>, <span class="va">tab2</span>, <span class="va">tab3</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Identifying columns to merge</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data type for variable Industry differ across tables - converting to character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Converting country names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The following columns are being merged:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \        country  Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 1  Nation   Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 2           industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 3  COUNTRY          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                               Performing merge: 2/2                                               Performing merge: 1/2                                               Merge complete</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Set merging_info to TRUE to save merging details)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Industry country        tot national_avg       rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        1     ITA 0.74087196           NA 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        1     FRA 0.47075893    0.5611297 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        2     ITA 0.02006119           NA 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        2     FRA 0.16948899    0.5611297 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     &lt;NA&gt;     USA         NA    0.3877577         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     &lt;NA&gt;     IND         NA    0.7592729         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        3    &lt;NA&gt;         NA           NA 0.58207068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        4    &lt;NA&gt;         NA           NA 0.34371483</span>
<span class="r-in"><span><span class="fu">auto_merge</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">tab1</span>, <span class="va">tab2</span>, <span class="va">tab3</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Identifying columns to merge</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data type for variable Industry differ across tables - converting to character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Converting country names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The following columns are being merged:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \        country  Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 1  Nation   Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 2           industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 3  COUNTRY          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                               Performing merge: 2/2                                               Performing merge: 1/2                                               Merge complete</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Set merging_info to TRUE to save merging details)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Industry country        tot national_avg       rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        1     ITA 0.74087196           NA 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        1     FRA 0.47075893    0.5611297 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        2     ITA 0.02006119           NA 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        2     FRA 0.16948899    0.5611297 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     &lt;NA&gt;     USA         NA    0.3877577         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     &lt;NA&gt;     IND         NA    0.7592729         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        3    &lt;NA&gt;         NA           NA 0.58207068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        4    &lt;NA&gt;         NA           NA 0.34371483</span>
<span class="r-in"><span><span class="fu">auto_merge</span><span class="op">(</span><span class="va">tab1</span>, <span class="va">tab2</span>, <span class="va">tab3</span>, by <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"countries"</span><span class="op">=</span><span class="st">"Nation|COUNTRY"</span>, <span class="st">"sector"</span><span class="op">=</span><span class="st">"[Ii]ndustry"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Identifying columns to merge</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data type for variable sector differ across tables - converting to character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Converting country names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The following columns are being merged:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =========  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \        countries  sector  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =========  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 1  Nation     Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 2             industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 3  COUNTRY            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =========  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                               Performing merge: 2/2                                               Performing merge: 1/2                                               Merge complete</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Set merging_info to TRUE to save merging details)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   sector countries        tot national_avg       rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      1       ITA 0.74087196           NA 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      1       FRA 0.47075893    0.5611297 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      2       ITA 0.02006119           NA 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      2       FRA 0.16948899    0.5611297 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5   &lt;NA&gt;       USA         NA    0.3877577         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6   &lt;NA&gt;       IND         NA    0.7592729         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      3      &lt;NA&gt;         NA           NA 0.58207068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      4      &lt;NA&gt;         NA           NA 0.34371483</span>
<span class="r-in"><span><span class="fu">auto_merge</span><span class="op">(</span><span class="va">tab1</span>, <span class="va">tab2</span>, <span class="va">tab3</span>, country_to <span class="op">=</span> <span class="st">"UN_fr"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Identifying columns to merge</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data type for variable Industry differ across tables - converting to character</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Converting country names</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> The following columns are being merged:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> \        country  Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 1  Nation   Industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 2           industry</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Table 3  COUNTRY          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> =======  =======  ========</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                               Performing merge: 2/2                                               Performing merge: 1/2                                               Merge complete</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> (Set merging_info to TRUE to save merging details)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   Industry               country        tot national_avg       rate</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1        1                Italie 0.74087196           NA 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2        1                France 0.47075893    0.5611297 0.06685012</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3        2                Italie 0.02006119           NA 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        2                France 0.16948899    0.5611297 0.87981118</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5     &lt;NA&gt; États-Unis d’Amérique         NA    0.3877577         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6     &lt;NA&gt;                  Inde         NA    0.7592729         NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7        3                  &lt;NA&gt;         NA           NA 0.58207068</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8        4                  &lt;NA&gt;         NA           NA 0.34371483</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Francesco Saverio Bellelli.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

